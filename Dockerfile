FROM node:18-alpine

ARG SERVER
ARG DB_HOST
ARG DB_USER
ARG DB_PWD
ARG DB_NAME
ARG SECRET_KEY

ENV SERVER=$SERVER
ENV DB_USER=$DB_USER
ENV DB_PWD=$DB_PWD
ENV DB_NAME=$DB_NAME
ENV SECRET_KEY=$SECRET_KEY

WORKDIR /app

COPY . .

RUN npm install

RUN npm run build

EXPOSE 5000

CMD ["npm", "run", "start"]